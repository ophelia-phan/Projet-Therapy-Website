{% extends 'layout.html' %}

{% block title %}
    Création de votre compte
{% endblock %}
<link rel="stylesheet" href="/static/styles.css">
{% block content %}
    <div class="mt-3">
    <h1 style="text-align:center">Inscription</h1>
    </div>
    <div class="container">
        
        
        <form action="/create-account" method="POST" onsubmit="return validatePassword()">

            <div class="form-outline mb-4">
                <label class="form-label" for="name">Votre nom</label>
                <input type="text" id="name" class="form-control" name="name" placeholder="Entrez votre nom" required/>
                
            </div>

            <div class="form-outline mb-4">
                <label for="email" class="form-label">Email :</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Entrez votre mail" required>
            </div>

            <div class="form-outline mb-4">
                <label for="password" class="form-label">Mot de passe :</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="Entrez un mot de passe" required>
                <div id="passwordError" class="text-danger"></div>
            </div>

            <div class="form-outline mb-4">
                <label for="confirm_password" class="form-label">Confirmer le mot de passe</label>
                <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Confirmez votre mot de passe" required>
                
                <div id="confirmPasswordError" class="text-danger"></div>
            </div>

            <div class="mb-4 form-check">
                <input type="checkbox" class="form-check-input" id="accept_terms" name="accept_terms" required>
                <label class="form-check-label" for="accept_terms">J'accepte les règles de confidentialité et les conditions d'utilisation.</label>
            </div>
            
            <button type="submit" class="btn btn-primary">S'inscrire</button>
        </form>

        
    </div>
    
    <div class="my-4 mx-4" >
            <p class="lead" style="color:white; text-align:center">
                Si vous êtes un professionnel de santé, <a class="" id="signup-pro" href="/signup-pro">Créez votre compte ici</a>
            </p>
        </div>
    <script>
        function validatePassword() {
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirm_password").value;
            var passwordError = document.getElementById("passwordError");
            var confirmPasswordError = document.getElementById("confirmPasswordError");
            var isValid = true;
    
            passwordError.textContent = "";
            confirmPasswordError.textContent = "";
    
            // Vérifier si le mot de passe a au moins 8 caractères
            if (password.length < 8) {
                passwordError.textContent = "Le mot de passe doit contenir au moins 8 caractères !";
                isValid = false;
            }
    
            // Vérifier si le mot de passe contient au moins une lettre majuscule, une lettre minuscule et un chiffre
            var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/;
            if (!regex.test(password)) {
                passwordError.textContent = "Le mot de passe doit contenir au moins une lettre majuscule, une lettre minuscule et un chiffre !";
                isValid = false;
            }
    
            // Vérifier si les mots de passe correspondent
            if (password !== confirmPassword) {
                confirmPasswordError.textContent = "Les mots de passe ne correspondent pas !";
                isValid = false;
            }
    
            return isValid;
        }

    </script>
{% endblock %}